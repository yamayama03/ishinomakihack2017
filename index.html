<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
</head>
<body>
  <section id="container"></section>
  <script id="topTemplate" type="text/ractive">
    <section class="top">
      <header>
        {{#if loggedIn}}
        <label on-click="@this.logout()">ログアウト</label>
        {{else}}
        <label on-click="@this.showLogin()">ログイン</label>
        {{/if}}

      </header>
      <div class=center><img src="./img/logo.png" class=logo_img/></div>
      <section class="card">
      <label on-click="@this.showList()">全ての投稿を見る</label>
        <h2>人気ブラック記事</h2>
        {{# list}}
        <div class="list_item line1" on-click="@this.showArticle(.)"> {{get("title")}} ({{get("point")}})</div>
        {{/}}
          <h2>新着トピック</h2>
        {{# list2}}
        <div class="list_item line1" on-click="@this.showArticle(.)"> {{get("title")}} ({{get("point")}})</div>
        {{/}}
        <button class="button match_width" on-click="@this.newArticle()">悩み投稿</button>
      </section>
      <section class="card">
          <div class=center><img on-click="@this.showTrouble()" src="./img/trouble.png" class="trouble_img" /></div>
        <button class="button match_width" on-click="@this.showTrouble()">悩みを打ち明ける</button>
      </section>
    </section>
  </script>
    
    
   <script id="LoginTemplate" type="text/ractive">
     <header class="toolbar">
       <img class="back" src="./img/arrow_back.png" on-click="@this.back()">
       <h1>ログイン</h1>
     </header>
                     <table>
                     <tr>
                         <th>
                             E-MAIL
                         </th>
                         <td>
                             <input type="text" name="user_id" value="{{email}}">
                         </td>
                     </tr>
                     <tr>
                         <th>
                             パスワード
                         </th>
                         <td>
                             <input type="password" name="password" value="{{password}}">
                         </td>
                     </tr>
                     <tr>
                         <td colspan="2">
                             <div class=center><button class="btn1" on-click="@this.showNext()" >login</button></div>
                         </td>
                     </tr>
                     <tr>
                         <td  colspan="2">
                         <div class=center><button class="btn1" on-click="@this.showSignUp()" >新規登録</button></div>
                         </td >
                     </tr>
             </table>
  </script>

   <script id="NewUserTemplate" type="text/ractive">
        <div align="center">
                     <table>
                     <tr>
                         <th>
                             登録メールアドレス
                         </th>
                         <td>
                             <input type="text" name="add_user_id" value={{email}}>
                         </td>
                     </tr>
                     <tr>
                         <th>
                             パスワード
                         </th>
                         <td>
                             <input type="password" name="add_password"  value={{password}}>
                         </td>
                     </tr>
                     <tr>
                         <td  colspan="2" >
                                   <div class=center><button class="btn1" on-click="showNext()">登録</button></div>
                         </td>
                     </tr>
             </table>
    </div>
  </script>

   <script id="ListTemplate" type="text/ractive">
      {{# list}}
         <div class="list_item line1" on-click="@this.showArticle(.)"> {{get("title")}} ({{get("point")}})</div>
      {{/}}
  </script>

   <script id="ArticleTemplate" type="text/ractive">
    <header class="toolbar">
      <img class="back" src="./img/arrow_back.png" on-click="@this.back()">		
      <h1>{{title}}</h1>		
    </header>   
    <pre style="white-space:normal;font-size:16px;">{{text}}</pre><br>
    {{#if point <= 5}}
        <div class=left><img src = "./img/meter_1.png">{{point}}</div>
         {{elseif point > 5 && point <= 10}}
        <div class=left><img src = "./img/meter_2.png">{{point}}</div>
         {{elseif point > 10 && point <= 15}}
        <div class=left><img src = "./img/meter_3.png">{{point}}</div>
         {{elseif point > 15 && point <= 20}}
        <div class=left><img src = "./img/meter_4.png">{{point}}</div>
         {{elseif point >= 21}}
        <div class=left><img src = "./img/meter_5.png">{{point}}</div>
        {{/if}}
    <p>累計ブラックポイント:{{point}}</p><br>
    <div>
      <button class="btn2 match_width" on-click="@this.addPoint()">ブラックだね</button><br><br>
      <h2>コメント</h2>
      <textarea type="text" rows="5" class="comment" value="{{comment}}"></textarea><br><br>
      <button class="btn1" on-click="@this.sendComment()">コメントする</button><br><br>
    </div>
    <h2>コメント一覧</h2><br>
     {{# list}}
        <div class="list_item line1"> {{get("comment")}} </div>
     {{/}}
    
  </script>


   <script id="PostTemplate" type="text/ractive">
     <header class="toolbar">
       <img class="back" src="./img/arrow_back.png" on-click="@this.back()">
       <h1>悩み投稿</h1>
     </header>
                     <table>
                     <tr>
                         <th>
                             タイトル
                         </th>
                         <td>
                             <input type="text" name="post_title" value="{{title}}">
                         </td>
                     </tr>
                     <tr>
                         <th>
                             本文
                         </th>
                         <td>
                             <textarea type="text"  rows="20" class="text" value="{{text}}"></textarea>
                         </td>
                     </tr>
                         </table>
                        <button class="btn1" on-click="@this.showNext()" >記事投稿</button>

  </script>

   <script id="TroubleTemplate" type="text/ractive">
    <header class="toolbar">	
      <img class="back" src="./img/arrow_back.png" on-click="@this.back()">
      <h1>お悩み相談室</h1>
    </header>   

    <p class="trouble_talk">{{# list}}
    {{#if key == 1 && value != ""}}
    	<div><pre class="text_right">{{value}}</pre><img src = "./img/ic_user.png"></div>
    {{elseif key == 2 && value != ""}}
    	<p><img src = "./img/ic_god.png"><span class="text">{{value}}</span></p>
    {{elseif key == 2 && value == ""}}
    	<p><img src = "./img/ic_god.png"><span class="text">信じる者は救われる</span></p>
    {{else}}
    {{/if}}
    	{{/}}</p>
    <div>
    <br>
    <textarea cols="20" rows="5" value= "{{text}}"></textarea>
    <button class="button" on-click="@this.send()">投稿</button>
    </div>
    <p></p>
  </script>

  <link rel="stylesheet" type="text/css" href="./css/main.css"/>
  <script src="./js/KiiSDK.min.js"></script>
  <script src="./js/ractive.js"></script>
  <!-- for backbone.js -->
  <script src="./js/underscore-min.js"></script>
  <script src="./js/jquery.min.js"></script>  
  <script src="./js/backbone-min.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>
